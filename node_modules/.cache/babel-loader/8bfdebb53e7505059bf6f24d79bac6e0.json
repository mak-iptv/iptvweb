{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\rayuv\\\\OneDrive\\\\Documents\\\\GitHub\\\\Reactv\\\\src\\\\components\\\\Live\\\\MainLive.js\",\n    _templateObject,\n    _templateObject2,\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Player from \"../Player/Player\";\nimport EpgListing from \"./EpgListing\";\nimport Channels from \"./Channels\";\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setPlaylist } from \"../../actions/set-Playlist\";\nimport { setGroupList } from \"../../actions/set-Group\";\nimport { resetMemory, setGroup } from \"../../other/last-opened-mode\";\nimport { loadGroup, loadPlaylist } from \"../../other/load-playlist\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport Popup from \"../Popup/Popup\";\nimport DB from \"../../other/local-db\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Main = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\npadding: 3vh 1vw;\\nbackground-color: var(--first-color);\\nheight: calc(100vh - 3rem);\\nz-index:1;\\ntransition: filter 0.5s ease;\\n\\n\"])));\n_c = Main;\nvar ChannelTitle = styled.h5(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\ncolor:white;\\nwhite-space: nowrap;\\ntext-overflow: ellipsis;\\n\"])));\n_c2 = ChannelTitle;\n\nvar MainLive = function MainLive() {\n  _s();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      blurBackground = _useState2[0],\n      setBlurBackground = _useState2[1];\n\n  var playingChannel = useSelector(function (state) {\n    return state.playingCh;\n  });\n  var playlist = useSelector(function (state) {\n    return state.playlist;\n  });\n  var dispatch = useDispatch();\n  var history = useHistory();\n\n  var _useParams = useParams(),\n      category = _useParams.category;\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showPopup = _useState4[0],\n      setShowPopup = _useState4[1];\n\n  useEffect(function () {\n    var fun = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var chs;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                setBlurBackground(isNaN(category) || category === undefined || history.location.pathname.includes(\"menu\") ? {\n                  filter: \"blur(.5rem)\",\n                  pointerEvents: \"none\"\n                } : {});\n\n                if (!(category != undefined && category != 0)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                _context.next = 4;\n                return loadPlaylist(\"live\", category);\n\n              case 4:\n                chs = _context.sent;\n                chs = chs || [];\n                if (category === \"fav\") chs = chs.filter(function (x) {\n                  return DB.findOne(\"live\", x.stream_id, true);\n                });\n                dispatch(setPlaylist(chs));\n                if (chs.length === 0) setShowPopup(1);\n                _context.next = 17;\n                break;\n\n              case 11:\n                if (!resetMemory(\"live\")) {\n                  _context.next = 16;\n                  break;\n                }\n\n                _context.next = 14;\n                return loadGroup(\"live\").then(function (gps) {\n                  if (!gps || gps.length === 0) {\n                    history.replace(\"/\");\n                    return;\n                  }\n\n                  gps.unshift({\n                    category_name: \"Only favorites\",\n                    category_id: \"fav\"\n                  });\n                  setGroup(gps[1].category_id);\n                  dispatch(setGroupList(gps));\n                  history.replace(\"/live/category/\" + gps[1].category_id + \"/\");\n                });\n\n              case 14:\n                _context.next = 17;\n                break;\n\n              case 16:\n                history.replace(\"/live/category/\");\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fun() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fun();\n  }, [dispatch, category]);\n  useEffect(function () {\n    if (history.location) setBlurBackground(isNaN(category) && category === undefined || history.location.pathname.includes(\"menu\") ? {\n      filter: \"blur(.5rem)\",\n      pointerEvents: \"none\"\n    } : {});\n  }, [history.location.pathname, category]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Main, {\n      style: blurBackground,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-5\",\n          style: {\n            paddingLeft: \"15px\",\n            maxHeight: \"calc(100vh - 4rem)\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(ChannelTitle, {\n            children: playingChannel ? playingChannel.name : \"No channel selected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 21\n          }, _this), /*#__PURE__*/_jsxDEV(Player, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 22\n          }, _this), /*#__PURE__*/_jsxDEV(EpgListing, {\n            Epg: playingChannel ? playingChannel.epg_channel_id : null,\n            Shift: playingChannel ? playingChannel.shift : 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 21\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-7\",\n          style: {\n            paddingLeft: 0\n          },\n          children: /*#__PURE__*/_jsxDEV(Channels, {\n            playlist: playlist\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 21\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, _this), showPopup && /*#__PURE__*/_jsxDEV(Popup, {\n      title: \"No stream found in selected category.\",\n      icon: \"fas fa-times\",\n      onclick: function onclick() {\n        setBlurBackground({});\n        setShowPopup(0);\n        history.replace(\"/live/category/\");\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 23\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(MainLive, \"KW+s1vpD6YhwMisUlANhP2ooRVk=\", false, function () {\n  return [useSelector, useSelector, useDispatch, useHistory, useParams];\n});\n\n_c3 = MainLive;\nexport default MainLive;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Main\");\n$RefreshReg$(_c2, \"ChannelTitle\");\n$RefreshReg$(_c3, \"MainLive\");","map":{"version":3,"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/src/components/Live/MainLive.js"],"names":["React","useEffect","useState","Player","EpgListing","Channels","styled","useSelector","useDispatch","setPlaylist","setGroupList","resetMemory","setGroup","loadGroup","loadPlaylist","useParams","useHistory","Popup","DB","Main","div","ChannelTitle","h5","MainLive","blurBackground","setBlurBackground","playingChannel","state","playingCh","playlist","dispatch","history","category","showPopup","setShowPopup","fun","isNaN","undefined","location","pathname","includes","filter","pointerEvents","chs","x","findOne","stream_id","length","then","gps","replace","unshift","category_name","category_id","paddingLeft","maxHeight","name","epg_channel_id","shift"],"mappings":"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","sourcesContent":["import React, { useEffect, useState} from 'react'\nimport Player from \"../Player/Player\"\nimport EpgListing from \"./EpgListing\"\nimport Channels from \"./Channels\"\n\nimport styled from \"styled-components\"\nimport {useSelector, useDispatch} from \"react-redux\"\n\nimport {setPlaylist} from \"../../actions/set-Playlist\"\nimport {setGroupList} from \"../../actions/set-Group\"\n\nimport {resetMemory, setGroup} from \"../../other/last-opened-mode\"\n\nimport {loadGroup,loadPlaylist} from \"../../other/load-playlist\"\nimport {useParams, useHistory} from \"react-router-dom\";\n\nimport Popup from \"../Popup/Popup\"\n\nimport DB from \"../../other/local-db\"\n\nconst Main = styled.div`\npadding: 3vh 1vw;\nbackground-color: var(--first-color);\nheight: calc(100vh - 3rem);\nz-index:1;\ntransition: filter 0.5s ease;\n\n`\n\nconst ChannelTitle = styled.h5`\ncolor:white;\nwhite-space: nowrap;\ntext-overflow: ellipsis;\n`\n\n\nconst MainLive = () => {\n    const [blurBackground, setBlurBackground] = useState()\n\n    const playingChannel = useSelector(state => state.playingCh);\n    const playlist = useSelector(state => state.playlist);\n    const dispatch = useDispatch()\n    const history = useHistory()\n\n    const { category } = useParams();\n    const [showPopup, setShowPopup] = useState(false);\n\n    useEffect(()=>{\n        const fun = async() => {\n            setBlurBackground(((isNaN(category) || category === undefined) || history.location.pathname.includes(\"menu\")) ? {filter:\"blur(.5rem)\",  pointerEvents: \"none\"} : {});\n            \n            if(category != undefined && category != 0){\n                let chs = await loadPlaylist(\"live\",category)\n                chs = chs || [];\n                if(category===\"fav\")\n                    chs = chs.filter(x=> DB.findOne(\"live\",x.stream_id,true))\n                dispatch(setPlaylist(chs));\n                if(chs.length === 0)\n                    setShowPopup(1)\n            }else if(resetMemory(\"live\")){\n                await loadGroup(\"live\").then(gps => {\n                    if(!gps || gps.length===0){\n                        history.replace(\"/\")\n                        return;\n                    }\n                    gps.unshift({category_name : \"Only favorites\", category_id:\"fav\"})\n                    setGroup(gps[1].category_id)\n                    dispatch(setGroupList(gps));\n                    history.replace(\"/live/category/\"+gps[1].category_id+\"/\")           \n                })\n            }else history.replace(\"/live/category/\");\n        }\n        fun()\n    },[dispatch,category])\n\n    useEffect(() => {\n        if(history.location)\n            setBlurBackground(((isNaN(category) && category === undefined) || history.location.pathname.includes(\"menu\")) ? {filter:\"blur(.5rem)\",  pointerEvents: \"none\"} : {});\n    }, [history.location.pathname, category])\n\n\n    return (\n        <div>\n        <Main style={blurBackground}>\n            <div className=\"row\">\n                <div className=\"col-5\" style={{paddingLeft:\"15px\", maxHeight : \"calc(100vh - 4rem)\"}}>\n                    <ChannelTitle>{playingChannel ? playingChannel.name : \"No channel selected\"}</ChannelTitle>\n                    {<Player/>}\n                    <EpgListing Epg={playingChannel ? playingChannel.epg_channel_id : null} Shift={playingChannel ? playingChannel.shift : 0}/>\n                </div>\n                <div className=\"col-7\" style={{paddingLeft:0}}>\n                    <Channels playlist={playlist}/>\n                </div>\n            </div>\n        </Main>\n        {showPopup && <Popup title={`No stream found in selected category.`} icon={\"fas fa-times\"}  onclick={()=>{\n        setBlurBackground({})\n          setShowPopup(0);\n          history.replace(\"/live/category/\")\n        }}/>}\n        {/*window.gSTB && (<Tips/>)*/}\n        </div>\n    )\n}\n\nexport default MainLive\n"]},"metadata":{},"sourceType":"module"}