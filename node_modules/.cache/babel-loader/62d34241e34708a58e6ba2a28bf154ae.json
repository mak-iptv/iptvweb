{"ast":null,"code":"import _slicedToArray from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\rayuv\\\\OneDrive\\\\Documents\\\\GitHub\\\\Reactv\\\\src\\\\components\\\\Live\\\\Channels.js\",\n    _templateObject,\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Channel from \"./Channel\";\nimport { setPlayingChannel } from \"../../actions/playingChannel\";\nimport { FixedSizeList as List } from \"react-window\";\nimport { convertRemToPixels, convertVhToPixels } from \"../../other/convert-rem\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport Popup from \"../Popup/Popup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar ChannelsList = styled.ul(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\nheight: calc(95vh - 3rem);\\npadding: .8rem .6rem;\\nbackground-color: var(--first-color);\\nlist-style-type: none;\\nborder-left: 1px solid #000;\\ntransform: translateY(-1px);\\nbox-shadow: 0 7px 14px rgb(50 50 93 / 10%), 0 3px 6px rgb(0 0 0 / 8%);\\n&:focus{\\n    outline-width: 0px;\\n}\\n\"])));\n_c = ChannelsList;\n\nvar Channels = function Channels(_ref) {\n  _s();\n\n  var playlist = _ref.playlist;\n  var playingChannel = useSelector(function (state) {\n    return state.playingCh;\n  });\n  var query = useQuery();\n  var searchText = query.get(\"search\");\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showPopup = _useState2[0],\n      setShowPopup = _useState2[1];\n\n  var _useState3 = useState(playlist),\n      _useState4 = _slicedToArray(_useState3, 2),\n      channelsPlaylist = _useState4[0],\n      setChannelsPlaylist = _useState4[1];\n\n  var dispatch = useDispatch();\n  var history = useHistory();\n  var location = useLocation();\n  var listRef = useRef();\n  useEffect(function () {\n    if (playingChannel) {\n      setTimeout(function () {\n        return focusChannel();\n      }, 100);\n    }\n  }, [playingChannel]);\n  useEffect(function () {\n    setChannelsPlaylist(playlist);\n    setTimeout(function () {\n      return focusChannel();\n    }, 100);\n  }, [playlist]);\n  useEffect(function () {\n    var searched = searchText ? playlist.filter(function (x) {\n      return x.name.toLowerCase().includes(searchText.toLowerCase());\n    }) : playlist;\n\n    if (searched.length > 0) {\n      setChannelsPlaylist(searched);\n      setTimeout(function () {\n        return focusChannel();\n      }, 100);\n    } else if (searchText) setShowPopup(1);else history.push(\"/live/category/\");\n  }, [searchText]);\n\n  var focusChannel = function focusChannel() {\n    if (document.getElementById(\"selectedCh\")) document.getElementById(\"selectedCh\").focus();else if (document.querySelector(\".channel\")) document.querySelector(\".channel\").focus();\n  };\n\n  var Row = function Row(_ref2) {\n    var index = _ref2.index,\n        style = _ref2.style;\n    return /*#__PURE__*/_jsxDEV(Channel, {\n      Name: channelsPlaylist[index].name,\n      Shift: channelsPlaylist[index].shift,\n      Epg: channelsPlaylist[index].epg_channel_id,\n      id: channelsPlaylist[index].stream_id,\n      Image: channelsPlaylist[index].stream_icon,\n      Number: channelsPlaylist[index].num,\n      selectEvent: function selectEvent() {\n        dispatch(setPlayingChannel(channelsPlaylist[index]));\n      },\n      virtualScrollStyle: style,\n      selected: playingChannel && playingChannel.stream_id === channelsPlaylist[index].stream_id\n    }, channelsPlaylist[index].stream_id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ChannelsList, {\n      tabIndex: 0,\n      children: /*#__PURE__*/_jsxDEV(List, {\n        height: convertVhToPixels(\"95vh\") - convertRemToPixels(5),\n        itemCount: channelsPlaylist.length,\n        itemSize: convertRemToPixels(5),\n        style: {\n          overflowY: \"auto\",\n          maxHeight: \"calc(95vh - 3rem)\"\n        },\n        useIsScrolling: true,\n        ref: listRef,\n        children: Row\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, _this), showPopup && /*#__PURE__*/_jsxDEV(Popup, {\n      title: \"No stream found with '\".concat(searchText, \"'\"),\n      description: \"Search will be resetted.\",\n      icon: \"fas fa-search\",\n      onclick: function onclick() {\n        setShowPopup(0);\n        focusChannel();\n        history.replace(location.pathname.split(\"?\")[0]);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 23\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(Channels, \"Cv9JBan4Avl0x8GWiyM/tmb2XWI=\", false, function () {\n  return [useSelector, useQuery, useDispatch, useHistory, useLocation];\n});\n\n_c2 = Channels;\n\nvar useQuery = function useQuery() {\n  _s2();\n\n  return new URLSearchParams(useLocation().search);\n};\n\n_s2(useQuery, \"EuD9q2dZ34PfN/QO2OBhBzeMxmY=\", false, function () {\n  return [useLocation];\n});\n\nexport default Channels;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ChannelsList\");\n$RefreshReg$(_c2, \"Channels\");","map":{"version":3,"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/src/components/Live/Channels.js"],"names":["React","useEffect","useRef","useState","styled","useSelector","useDispatch","Channel","setPlayingChannel","FixedSizeList","List","convertRemToPixels","convertVhToPixels","useHistory","useLocation","Popup","ChannelsList","ul","Channels","playlist","playingChannel","state","playingCh","query","useQuery","searchText","get","showPopup","setShowPopup","channelsPlaylist","setChannelsPlaylist","dispatch","history","location","listRef","setTimeout","focusChannel","searched","filter","x","name","toLowerCase","includes","length","push","document","getElementById","focus","querySelector","Row","index","style","shift","epg_channel_id","stream_id","stream_icon","num","overflowY","maxHeight","replace","pathname","split","URLSearchParams","search"],"mappings":"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","sourcesContent":["import React, {useEffect,useRef, useState} from 'react'\nimport styled from \"styled-components\"\nimport {useSelector, useDispatch} from \"react-redux\"\nimport Channel from \"./Channel\"\nimport {setPlayingChannel} from \"../../actions/playingChannel\"\nimport { FixedSizeList as List } from \"react-window\";\nimport {convertRemToPixels,convertVhToPixels} from \"../../other/convert-rem\"\nimport {useHistory,useLocation} from \"react-router-dom\";\nimport Popup from \"../Popup/Popup\"\n\nconst ChannelsList = styled.ul`\nheight: calc(95vh - 3rem);\npadding: .8rem .6rem;\nbackground-color: var(--first-color);\nlist-style-type: none;\nborder-left: 1px solid #000;\ntransform: translateY(-1px);\nbox-shadow: 0 7px 14px rgb(50 50 93 / 10%), 0 3px 6px rgb(0 0 0 / 8%);\n&:focus{\n    outline-width: 0px;\n}\n`\n\nconst Channels = ({playlist}) => {\n    const playingChannel = useSelector(state => state.playingCh);\n    \n    const query = useQuery();\n    const searchText = query.get(\"search\");\n    \n    const [showPopup, setShowPopup] = useState(false);\n    const [channelsPlaylist, setChannelsPlaylist] = useState(playlist);\n\n\n    const dispatch = useDispatch()\n    const history = useHistory();\n    const location = useLocation();\n    const listRef = useRef();\n\n    \n    useEffect(() => {\n      if(playingChannel){\n        setTimeout(()=>focusChannel(),100)\n      }\n    }, [playingChannel]);\n\n    useEffect(() => {\n      setChannelsPlaylist(playlist)\n      setTimeout(()=>focusChannel(),100)\n    }, [playlist]);\n\n\n    useEffect(() => {\n      const searched = searchText ? playlist.filter(x=> x.name.toLowerCase().includes(searchText.toLowerCase())) : playlist\n      if(searched.length>0){\n        setChannelsPlaylist(searched)\n        setTimeout(() => focusChannel(), 100);\n      }else if(searchText)\n        setShowPopup(1)\n      else history.push(\"/live/category/\")\n    }, [searchText]);\n\n    const focusChannel = () => {\n      if(document.getElementById(\"selectedCh\"))\n        document.getElementById(\"selectedCh\").focus()\n      else if(document.querySelector(\".channel\"))\n        document.querySelector(\".channel\").focus()\n    }\n\n\n    const Row = ({ index, style }) => (\n        <Channel key={channelsPlaylist[index].stream_id} \n                Name={channelsPlaylist[index].name} \n                Shift = {channelsPlaylist[index].shift} \n                Epg={channelsPlaylist[index].epg_channel_id} \n                id={channelsPlaylist[index].stream_id} Image={channelsPlaylist[index].stream_icon} \n                Number={channelsPlaylist[index].num} \n                selectEvent={() => {\n                    dispatch(setPlayingChannel(channelsPlaylist[index]))\n                }}\n                virtualScrollStyle={style} \n                selected={playingChannel && playingChannel.stream_id === channelsPlaylist[index].stream_id} />\n    );\n\n    return (\n      <>\n        <ChannelsList tabIndex={0} >\n            <List\n              height={convertVhToPixels(\"95vh\")-convertRemToPixels(5)}\n              itemCount={channelsPlaylist.length}\n              itemSize={convertRemToPixels(5)}\n              style={{overflowY:\"auto\", maxHeight: \"calc(95vh - 3rem)\"}}\n              useIsScrolling={true}\n              ref={listRef}\n            >\n              {Row}\n            </List>          \n        </ChannelsList>\n        {showPopup && <Popup title={`No stream found with '${searchText}'`} description={\"Search will be resetted.\"} icon={\"fas fa-search\"}  onclick={()=>{\n          setShowPopup(0);\n          focusChannel();\n          history.replace(location.pathname.split(\"?\")[0])\n        }}/>}\n      </>\n    )\n}\n\nconst useQuery = () => {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport default Channels\n"]},"metadata":{},"sourceType":"module"}