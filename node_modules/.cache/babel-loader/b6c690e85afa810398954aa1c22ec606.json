{"ast":null,"code":"import _slicedToArray from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\rayuv\\\\OneDrive\\\\Documents\\\\GitHub\\\\Reactv\\\\src\\\\components\\\\Login.js\",\n    _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useHistory } from \"react-router-dom\";\nimport { useAuth } from \"../other/auth\";\nimport Popup from \"./Popup/Popup\";\nimport Cookies from 'js-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar Container = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\nposition:absolute;\\nwidth:100%;\\nheight:100%;\\ntop:0;\\nleft:0;\\nbackground-color: var(--first-color);\\ntransition: all .5s ease;\\noverflow:hidden;\\n\\n& > * >input{\\n    background-color: var(--first-color); \\n    color:white;\\n}\\n\"])));\n_c = Container;\nvar Box = styled.form(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\nwidth: 50vw;\\nleft: 25vw;\\ntop: 25vh;\\nposition: absolute;\\n\\n& > h2, & > h5{\\n    color:white;\\n    text-align: center;\\n}\\n\\n& > label{\\n    color:white;\\n}\\n\"])));\n_c2 = Box;\nvar Input = styled.input(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\nmargin-bottom: 1rem;\\n\\n&:focus{\\n    color:white;\\n    border-color: var(--second-color);\\n    box-shadow: 0 0 0 0.2rem var(--second-color-shadow);\\n    background-color: var(--first-color);\\n    transition: all .5s ease;\\n}\\n\"])));\n_c3 = Input;\nvar Button = styled.button(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\ncolor: #fff;\\nbackground-color: var(--second-color);\\ntransition: all .5s ease;\\nwidth:100%;\\n\\n&:hover, &:focus{\\n    background-color: #829196;\\n    color:white;\\n    border-color: #829196;\\n    box-shadow: 0 0 0 0.2rem #82919608;\\n    transition: all .5s ease;\\n}\\n\"])));\n_c4 = Button;\n\nvar Login = function Login(_ref) {\n  _s();\n\n  var url = _ref.url;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      dns = _useState2[0],\n      setDns = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      username = _useState4[0],\n      setUsername = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      password = _useState6[0],\n      setPassword = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      showPopup = _useState8[0],\n      setShowPopup = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      blur = _useState10[0],\n      setBlur = _useState10[1];\n\n  var _useState11 = useState(window.m3u8warning === true && !Cookies.get(\"m3u8_play\")),\n      _useState12 = _slicedToArray(_useState11, 2),\n      m3u8 = _useState12[0],\n      setM3u8 = _useState12[1];\n\n  var history = useHistory();\n  var auth = useAuth();\n  useEffect(function () {\n    if (auth.isAuth()) history.push(url || \"/\");else auth.authLogin(function () {\n      return history.push(url || \"/\");\n    });\n  }, [auth, history]);\n  useEffect(function () {\n    m3u8 ? setBlur({\n      filter: \"blur(.3rem)\"\n    }) : setBlur({});\n  }, [m3u8]);\n  var inputRef = useRef(0);\n\n  var remoteController = function remoteController(event) {\n    var active = document.activeElement;\n\n    if (event.keyCode === 40 && active.nextSibling) {\n      if (active.nextSibling.tagName === \"LABEL\") active = active.nextSibling;\n      active.nextSibling.focus();\n    } else if (event.keyCode === 38 && active.previousSibling) {\n      if (active.previousSibling.tagName === \"LABEL\") active = active.previousSibling;\n      active.previousSibling.focus();\n    } else if (event.keyCode === 13) active.click();\n  };\n\n  var login = function login(e) {\n    e.preventDefault();\n    setBlur({\n      filter: \"blur(.3rem)\"\n    });\n    auth.signin(dns, username, password, function () {\n      return window.location = \"/\";\n    } //history.replace(\"/\")\n    , function (title, description) {\n      setShowPopup({\n        title: title,\n        description: description\n      });\n    });\n  };\n\n  var closePopup = function closePopup() {\n    setBlur({\n      filter: \"blur(0)\"\n    });\n    setShowPopup(false);\n    inputRef.current.focus();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      style: blur,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        onKeyDown: remoteController,\n        onSubmit: login,\n        children: [false && /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Welcome to \", window.playername]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 28\n        }, _this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/img/banner_w.png\",\n            alt: \"\",\n            className: \"d-inline-block\",\n            style: {\n              maxWidth: \"30vw\",\n              maxHeight: \"18vh\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 34\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Write your credentials to continue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }, _this), !window.dns && [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Provider URL:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Input, {\n          ref: inputRef,\n          className: \"form-control\",\n          type: \"text\",\n          spellCheck: false,\n          placeholder: \"http://domain.com:80\",\n          name: \"dns\",\n          autoFocus: true,\n          onChange: function onChange(e) {\n            return setDns(e.target.value);\n          },\n          value: dns\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, _this)], /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(Input, {\n          ref: window.dns ? inputRef : null,\n          className: \"form-control\",\n          type: \"text\",\n          spellCheck: false,\n          placeholder: \"Username\",\n          name: \"username\",\n          autoFocus: true,\n          onChange: function onChange(e) {\n            return setUsername(e.target.value);\n          },\n          value: username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(Input, {\n          className: \"form-control\",\n          type: \"password\",\n          spellCheck: false,\n          placeholder: \"****\",\n          name: \"password\",\n          onChange: function onChange(e) {\n            return setPassword(e.target.value);\n          },\n          value: password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          value: \"1\",\n          onClick: login,\n          className: \"btn\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 17\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, _this), showPopup && /*#__PURE__*/_jsxDEV(Popup, {\n      unsecure: true,\n      title: showPopup.title,\n      description: showPopup.description,\n      icon: \"fas fa-user-times\",\n      onclick: closePopup\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 23\n    }, _this), m3u8 && /*#__PURE__*/_jsxDEV(Popup, {\n      unsecure: true,\n      error: false,\n      title: \"Informations\",\n      description: \"To login use your IPTVEditor's playlist username and password, not your email.<br/>IPTVEditor Web Player can play live channels streams only in M3U8 format.<br/>The conversion will be done automatically if streams are in Xtreamcodes format (this won't affect your playlist).\",\n      icon: \"fas fa-info-circle\",\n      onclick: function onclick() {\n        Cookies.set(\"m3u8_play\", 1, {\n          expires: 365\n        });\n        setM3u8(!m3u8);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(Login, \"liR71jCIiXZnOBfQSc+oVmxfE3k=\", false, function () {\n  return [useHistory, useAuth];\n});\n\n_c5 = Login;\nexport default Login;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Box\");\n$RefreshReg$(_c3, \"Input\");\n$RefreshReg$(_c4, \"Button\");\n$RefreshReg$(_c5, \"Login\");","map":{"version":3,"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/src/components/Login.js"],"names":["React","useState","useRef","useEffect","styled","useHistory","useAuth","Popup","Cookies","Container","div","Box","form","Input","input","Button","button","Login","url","dns","setDns","username","setUsername","password","setPassword","showPopup","setShowPopup","blur","setBlur","window","m3u8warning","get","m3u8","setM3u8","history","auth","isAuth","push","authLogin","filter","inputRef","remoteController","event","active","document","activeElement","keyCode","nextSibling","tagName","focus","previousSibling","click","login","e","preventDefault","signin","location","title","description","closePopup","current","playername","maxWidth","maxHeight","target","value","set","expires"],"mappings":"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","sourcesContent":["import React, {useState,useRef,useEffect} from 'react'\nimport styled from 'styled-components';\nimport {useHistory} from \"react-router-dom\";\nimport {useAuth} from \"../other/auth\"\nimport Popup from \"./Popup/Popup\"\nimport Cookies from 'js-cookie'\n\nconst Container = styled.div`\nposition:absolute;\nwidth:100%;\nheight:100%;\ntop:0;\nleft:0;\nbackground-color: var(--first-color);\ntransition: all .5s ease;\noverflow:hidden;\n\n& > * >input{\n    background-color: var(--first-color); \n    color:white;\n}\n`\n\nconst Box = styled.form`\nwidth: 50vw;\nleft: 25vw;\ntop: 25vh;\nposition: absolute;\n\n& > h2, & > h5{\n    color:white;\n    text-align: center;\n}\n\n& > label{\n    color:white;\n}\n`\n\nconst Input = styled.input`\nmargin-bottom: 1rem;\n\n&:focus{\n    color:white;\n    border-color: var(--second-color);\n    box-shadow: 0 0 0 0.2rem var(--second-color-shadow);\n    background-color: var(--first-color);\n    transition: all .5s ease;\n}\n`\n\nconst Button = styled.button`\ncolor: #fff;\nbackground-color: var(--second-color);\ntransition: all .5s ease;\nwidth:100%;\n\n&:hover, &:focus{\n    background-color: #829196;\n    color:white;\n    border-color: #829196;\n    box-shadow: 0 0 0 0.2rem #82919608;\n    transition: all .5s ease;\n}\n`\n\nconst Login = ({url}) => {\n    \n    const [dns, setDns] = useState(\"\");\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [showPopup, setShowPopup] = useState(false);\n    const [blur, setBlur] = useState();\n    const [m3u8, setM3u8] = useState(window.m3u8warning === true  && !Cookies.get(\"m3u8_play\"));\n\n    const history = useHistory();\n    const auth = useAuth();\n\n    useEffect(() => {\n        if(auth.isAuth())\n            history.push(url||\"/\")\n        else auth.authLogin(()=>history.push(url||\"/\"))\n    },[auth,history]);\n    \n    useEffect(()=>{\n        m3u8 ? setBlur({filter:\"blur(.3rem)\"}) : setBlur({});\n    },[m3u8])\n\n    const inputRef = useRef(0)\n\n    const remoteController = (event) => {\n        let active = document.activeElement;\n        if (event.keyCode === 40 && active.nextSibling) {\n            if(active.nextSibling.tagName===\"LABEL\")\n                active = active.nextSibling;\n            active.nextSibling.focus();\n        } else if (event.keyCode === 38 && active.previousSibling) {\n            if(active.previousSibling.tagName===\"LABEL\")\n                active = active.previousSibling;\n            active.previousSibling.focus();\n        } else if (event.keyCode === 13)\n            active.click();\n    }\n\n    const login = (e) =>{\n        e.preventDefault();\n        setBlur({filter:\"blur(.3rem)\"})\n        auth.signin(dns ,username,password, \n            () => window.location=\"/\"//history.replace(\"/\")\n            ,\n            (title,description) => {\n                setShowPopup({title:title,description:description});\n            }\n        )\n    }\n\n    const closePopup = () =>{\n        setBlur({filter:\"blur(0)\"});\n        setShowPopup(false);\n        inputRef.current.focus();\n    }\n\n    return (\n        <>\n        <Container style={blur}>\n            <Box onKeyDown={remoteController} onSubmit={login}>\n                {false && (<h2>Welcome to {window.playername}</h2>)}\n                <h2 className=''><img src=\"/img/banner_w.png\" alt=\"\" className=\"d-inline-block\" style={{maxWidth: \"30vw\", maxHeight:\"18vh\"}}/></h2>\n                \n                <h5>Write your credentials to continue</h5>\n                <br/>\n                {!window.dns && \n                ([\n                    <label>Provider URL:</label>,\n                    <Input ref={inputRef} className=\"form-control\" type=\"text\" spellCheck={false} placeholder=\"http://domain.com:80\" name=\"dns\" autoFocus onChange={(e)=> setDns(e.target.value)} value={dns} />\n                ])                \n                }\n                <label>Username</label>\n                <Input ref={window.dns ? inputRef : null} className=\"form-control\" type=\"text\" spellCheck={false} placeholder=\"Username\" name=\"username\" autoFocus onChange={(e)=> setUsername(e.target.value)} value={username} />\n                <label>Password</label>\n                <Input className=\"form-control\" type=\"password\" spellCheck={false} placeholder=\"****\" name=\"password\" onChange={(e)=> setPassword(e.target.value)} value={password}/>\n                <Button type=\"button\" value=\"1\" onClick={login} className=\"btn\">Login</Button>\n            </Box>\n        </Container>\n        {showPopup && <Popup unsecure={true} title={showPopup.title} description={showPopup.description} icon={\"fas fa-user-times\"}  onclick={closePopup}/>}\n        {m3u8 && (\n            <Popup unsecure={true} error={false} title={\"Informations\"} description={\"To login use your IPTVEditor's playlist username and password, not your email.<br/>IPTVEditor Web Player can play live channels streams only in M3U8 format.<br/>The conversion will be done automatically if streams are in Xtreamcodes format (this won't affect your playlist).\"} icon={\"fas fa-info-circle\"} onclick={()=>  {Cookies.set(\"m3u8_play\",1,{ expires: 365 }); setM3u8(!m3u8);}}/>\n        )}\n        {/*showKeyboard !== false && isMag && (<KeyboardOverlay onValueChange={onChange} onKeyboardClose={onKeyboardClose} itemValue={showKeyboard}/>)*/}\n        </>\n    )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}