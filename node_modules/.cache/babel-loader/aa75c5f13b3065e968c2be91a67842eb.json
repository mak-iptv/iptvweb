{"ast":null,"code":"import _objectSpread from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\rayuv\\\\OneDrive\\\\Documents\\\\GitHub\\\\Reactv\\\\src\\\\components\\\\Vod\\\\PlayerVod.js\",\n    _templateObject,\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport ReactNetflixPlayer from \"../../other/Player-github/player-github\";\nimport styled from 'styled-components';\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { optimizeName } from \"../../other/vod-series-name-optimizer\";\nimport { useSelector } from \"react-redux\";\nimport DB from \"../../other/local-db\";\nimport { generateUrl } from \"../../other/generate-url\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Container = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\nposition:absolute;\\nwidth: 100%;\\nheight: 100%;\\ntop: 0;\\nleft: 0;\\n\"])));\n_c = Container;\n\nvar PlayerVod = function PlayerVod() {\n  _s();\n\n  var _useParams = useParams(),\n      category = _useParams.category,\n      stream_id = _useParams.stream_id;\n\n  var history = useHistory();\n  var stream = useSelector(function (state) {\n    return state.playlist;\n  }).find(function (x) {\n    return x.stream_id === parseInt(stream_id);\n  });\n\n  var _useState = useState(DB.findOne(\"movie\", stream_id)),\n      _useState2 = _slicedToArray(_useState, 2),\n      streamStat = _useState2[0],\n      setStreamStat = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      url = _useState4[0],\n      setUrl = _useState4[1];\n\n  useEffect(function () {\n    if (!stream) {\n      history.replace(\"/movie/\");\n      return;\n    }\n\n    if (stream.direct_source) setUrl(stream.direct_source);else {\n      setUrl(generateUrl(\"movie\", stream.stream_id, stream.container_extension));\n    }\n  }, [stream]);\n  useEffect(function () {\n    var stat = DB.findOne(\"movie\", stream_id);\n    !stat && (stat = {\n      id: stream_id,\n      start: 0,\n      tot: 0\n    });\n    setStreamStat(stat);\n    DB.set(\"movie\", stream_id, stat);\n  }, [category, stream_id]);\n\n  var setStat = function setStat(stat) {\n    setStreamStat(stat);\n    DB.set(\"movie\", stream_id, stat);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(ReactNetflixPlayer, {\n      src: url,\n      title: optimizeName(stream.name),\n      titleMedia: optimizeName(stream.name),\n      backButton: function backButton() {\n        return history.goBack();\n      },\n      FullPlayer: true,\n      autoPlay: true,\n      startPosition: streamStat ? parseInt(streamStat.start) : 0,\n      syncDuration: function syncDuration(duration, percentage) {\n        return setStat(_objectSpread(_objectSpread({}, streamStat), {}, {\n          start: duration,\n          tot: parseInt(percentage)\n        }));\n      },\n      OnEnded: function OnEnded() {\n        DB.del(\"movie\", stream_id);\n        history.goBack();\n      },\n      overlayEnabled: true,\n      autoControllCloseEnabled: true,\n      Style: true,\n      primaryColor: \"var(--second-color)\",\n      secundaryColor: \"var(--first-color)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(PlayerVod, \"uUrOKdCDcLdPQQq3VngUM6wbydU=\", false, function () {\n  return [useParams, useHistory, useSelector];\n});\n\n_c2 = PlayerVod;\nexport default PlayerVod;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"PlayerVod\");","map":{"version":3,"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/src/components/Vod/PlayerVod.js"],"names":["React","useEffect","useState","ReactNetflixPlayer","styled","useParams","useHistory","optimizeName","useSelector","DB","generateUrl","Container","div","PlayerVod","category","stream_id","history","stream","state","playlist","find","x","parseInt","findOne","streamStat","setStreamStat","url","setUrl","replace","direct_source","container_extension","stat","id","start","tot","set","setStat","name","goBack","duration","percentage","del"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport ReactNetflixPlayer from \"../../other/Player-github/player-github\"\nimport styled from 'styled-components'\nimport {useParams,useHistory} from \"react-router-dom\";\nimport {optimizeName} from \"../../other/vod-series-name-optimizer\"\nimport {useSelector} from \"react-redux\"\nimport DB from \"../../other/local-db\"\nimport {generateUrl} from \"../../other/generate-url\"\n\nconst Container = styled.div`\nposition:absolute;\nwidth: 100%;\nheight: 100%;\ntop: 0;\nleft: 0;\n`\n\nconst PlayerVod = () => {\n    const {category,stream_id} = useParams();\n    const history = useHistory();\n\n    const stream = useSelector(state => state.playlist).find(x=>x.stream_id === parseInt(stream_id));\n    const [streamStat,setStreamStat] = useState(DB.findOne(\"movie\",stream_id));\n\n    const [url, setUrl] = useState();\n\n    useEffect(()=>{\n        if(!stream){\n            history.replace(`/movie/`);\n            return;\n        }\n        if(stream.direct_source)\n            setUrl(stream.direct_source)\n        else{\n            setUrl(generateUrl(\"movie\",stream.stream_id,stream.container_extension))\n        }\n    },[stream])\n\n    useEffect(()=>{\n        let stat = DB.findOne(\"movie\",stream_id);\n        !stat && (stat={id: stream_id, start:0, tot:0}) \n        setStreamStat(stat)\n        DB.set(\"movie\",stream_id, stat)\n    },[category, stream_id])\n\n    const setStat = (stat) =>{\n        setStreamStat(stat);\n        DB.set(\"movie\",stream_id, stat)\n    }\n\n\n    return (\n        <Container>\n            <ReactNetflixPlayer\n            src={url}\n            title={optimizeName(stream.name)}\n            titleMedia={optimizeName(stream.name)}\n            backButton={()=> history.goBack()}\n            FullPlayer\n            autoPlay\n            startPosition={streamStat ? parseInt(streamStat.start) : 0}\n            syncDuration = {(duration, percentage) => setStat({...streamStat, start:duration, tot : parseInt(percentage)})}\n\n            OnEnded={()=> {DB.del(\"movie\",stream_id);history.goBack()}}\n            overlayEnabled\n            autoControllCloseEnabled\n            Style\n            primaryColor=\"var(--second-color)\"\n            secundaryColor=\"var(--first-color)\"\n            />\n        </Container>\n    )\n}\n\nexport default PlayerVod\n"]},"metadata":{},"sourceType":"module"}