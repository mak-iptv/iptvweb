{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { optimizeName, secondsToHms, createMovieInfo, createEpisode } from \"./vod-series-name-optimizer\";\nimport * as axios from \"./axios\";\nexport function getVodTmdbData(_x, _x2) {\n  return _getVodTmdbData.apply(this, arguments);\n}\n\nfunction _getVodTmdbData() {\n  _getVodTmdbData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(name, existingTmdb) {\n    var language, tmdb, tmdbId, imageVod, coverBig, durationSecs, duration, rating10, youtubeTrailer, releaseDate, director, actors, cast, description, plot, age, country, genre, backdropPath, status, runtime, trailer, crew;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            language = navigator.language || navigator.userLanguage;\n            name = optimizeName(name);\n\n            if (window.tmdb) {\n              _context.next = 4;\n              break;\n            }\n\n            return _context.abrupt(\"return\", createMovieInfo(name));\n\n          case 4:\n            _context.t0 = existingTmdb;\n\n            if (_context.t0) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 8;\n            return axios.get(\"https://api.themoviedb.org/3/search/movie\".concat(language ? \"?language=\".concat(language.toLowerCase(), \"&\") : \"?\", \"api_key=\").concat(window.tmdb, \"&query=\").concat(encodeURI(name)), {\n              headers: {\n                'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.55 Safari/537.36 Edg/86.0.622.28'\n              }\n            }).catch(function (err) {\n              return null;\n            });\n\n          case 8:\n            _context.t0 = _context.sent;\n\n          case 9:\n            tmdb = _context.t0;\n            ;\n\n            if (!(existingTmdb || tmdb && tmdb.data && tmdb.data.results.length > 0)) {\n              _context.next = 44;\n              break;\n            }\n\n            tmdbId = existingTmdb || tmdb.data[\"results\"][0][\"id\"];\n            _context.next = 15;\n            return axios.get(\"https://api.themoviedb.org/3/movie/\".concat(tmdbId).concat(language ? \"?language=\".concat(language.toLowerCase(), \"&\") : \"?\", \"api_key=\").concat(window.tmdb, \"&append_to_response=images,credits,videos\"), {\n              headers: {\n                'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.55 Safari/537.36 Edg/86.0.622.28'\n              }\n            }).catch(function (err) {\n              return null;\n            });\n\n          case 15:\n            tmdb = _context.sent;\n            ;\n\n            if (!(tmdb && tmdb.data && !tmdb.data.success)) {\n              _context.next = 41;\n              break;\n            }\n\n            tmdb = tmdb.data;\n            imageVod = \"\";\n            coverBig = \"\", durationSecs = 0, duration = \"\", rating10 = 0;\n            youtubeTrailer = \"\", releaseDate = \"\";\n            director = \"\", actors = \"\", cast = \"\", description = \"\", plot = \"\", age = \"\";\n            country = \"\", genre = \"\", backdropPath = \"\", status = \"Released\", runtime = 0;\n            if (tmdb.title) name = tmdb.title;\n\n            if (tmdb.poster_path) {\n              imageVod = \"https://image.tmdb.org/t/p/original\".concat(tmdb.poster_path);\n            }\n\n            if (tmdb.images && tmdb.images.backdrops && tmdb.images.backdrops.length > 0) {\n              coverBig = \"https://image.tmdb.org/t/p/original\".concat(tmdb.images.backdrops[0].file_path);\n            }\n\n            if (tmdb.status) status = tmdb.status;\n\n            if (tmdb.runtime) {\n              runtime = tmdb.runtime;\n              durationSecs = runtime * 60;\n              duration = secondsToHms(durationSecs);\n            }\n\n            if (tmdb.vote_average) rating10 = tmdb.vote_average;\n\n            if (tmdb.videos && tmdb.videos.results && tmdb.videos.results.length > 0) {\n              trailer = tmdb.videos.results.find(function (x) {\n                return x.type === \"Trailer\";\n              }) || tmdb.videos.results.find(function (x) {\n                return x.type === \"Teaser\";\n              });\n              if (trailer) youtubeTrailer = trailer.key;\n            }\n\n            if (tmdb.release_date) {\n              releaseDate = tmdb.release_date;\n              age = \"\".concat(parseInt((new Date() - new Date(releaseDate)) / (1000 * 60 * 60 * 24)), \" days ago\");\n            }\n\n            if (tmdb.credits && tmdb.credits.cast) {\n              cast = tmdb.credits.cast.map(function (x) {\n                return x.name;\n              }).join(', ');\n              actors = cast;\n            }\n\n            if (tmdb.credits && tmdb.credits.crew) {\n              crew = tmdb.credits.crew.filter(function (x) {\n                return x.job === \"Director\";\n              });\n\n              if (crew) {\n                director = crew.map(function (x) {\n                  return x.name;\n                }).join(', ');\n              }\n            }\n\n            if (tmdb.overview) {\n              description = tmdb.overview;\n              plot = description;\n            }\n\n            if (tmdb.production_countries && tmdb.production_countries.length > 0) {\n              country = tmdb.production_countries[0].name;\n            }\n\n            if (tmdb.genres) genre = tmdb.genres.map(function (x) {\n              return x.name;\n            }).join(', ');\n            if (tmdb.backdrop_path) backdropPath = \"https://image.tmdb.org/t/p/original\".concat(tmdb.backdrop_path);\n            return _context.abrupt(\"return\", createMovieInfo(name, imageVod, tmdbId, releaseDate, coverBig, youtubeTrailer, director, actors, cast, description, plot, age, country, genre, backdropPath, durationSecs, duration, rating10, status, runtime));\n\n          case 41:\n            return _context.abrupt(\"return\", null);\n\n          case 42:\n            _context.next = 45;\n            break;\n\n          case 44:\n            return _context.abrupt(\"return\", null);\n\n          case 45:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getVodTmdbData.apply(this, arguments);\n}\n\nexport function getSeriesTmdbData(_x3, _x4, _x5) {\n  return _getSeriesTmdbData.apply(this, arguments);\n}\n\nfunction _getSeriesTmdbData() {\n  _getSeriesTmdbData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(name, streams, existingTmdb) {\n    var language, info, episodes, tmdb, tmdbId, seasons, trailer, duration_secEp, durationEp;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            language = navigator.language || navigator.userLanguage;\n            name = optimizeName(name);\n            info = {};\n            episodes = {};\n            _context2.t0 = existingTmdb;\n\n            if (_context2.t0) {\n              _context2.next = 9;\n              break;\n            }\n\n            _context2.next = 8;\n            return axios.get(\"https://api.themoviedb.org/3/search/tv\".concat(language ? \"?language=\".concat(language.toLowerCase(), \"&\") : \"?\", \"api_key=\").concat(window.tmdb, \"&query=\").concat(encodeURI(name)), {\n              headers: {\n                'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.55 Safari/537.36 Edg/86.0.622.28'\n              }\n            }).catch(function (err) {\n              return null;\n            });\n\n          case 8:\n            _context2.t0 = _context2.sent;\n\n          case 9:\n            tmdb = _context2.t0;\n            ;\n\n            if (!(existingTmdb || tmdb && tmdb.data && tmdb.data.results.length > 0)) {\n              _context2.next = 22;\n              break;\n            }\n\n            tmdbId = existingTmdb || tmdb.data[\"results\"][0][\"id\"];\n            seasons = \"\";\n            streams && streams.length > 0 && (seasons = Array.from(new Set(streams.map(function (x) {\n              return x.season;\n            }))).map(function (x) {\n              return \"\\\",season/\".concat(x);\n            }));\n            _context2.next = 17;\n            return axios.get(\"https://api.themoviedb.org/3/tv/\".concat(tmdbId).concat(language ? \"?language=\".concat(language.toLowerCase(), \"&\") : \"?\", \"api_key=\").concat(window.tmdb, \"&append_to_response=images,credits,videos\").concat(seasons), {\n              headers: {\n                'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.55 Safari/537.36 Edg/86.0.622.28'\n              }\n            }).catch(function (err) {\n              return null;\n            });\n\n          case 17:\n            tmdb = _context2.sent;\n            ;\n\n            if (tmdb && tmdb.data && !tmdb.data.success) {\n              tmdb = tmdb.data;\n              if (tmdb.name) info.name = tmdb.name;\n              if (tmdb.poster_path) info.cover = \"https://image.tmdb.org/t/p/original\".concat(tmdb.poster_path);\n              if (tmdb.credits && tmdb.credits.cast) info.cast = tmdb.credits.cast.map(function (x) {\n                return x.name;\n              }).join(', ');\n              if (tmdb.created_by) info.director = tmdb.created_by.map(function (x) {\n                return x.name;\n              }).join(', ');\n              if (tmdb.genres) info.genre = tmdb.genres.map(function (x) {\n                return x.name;\n              }).join(', ');\n              if (tmdb.first_air_date) info.releaseDate = tmdb.last_air_date;\n\n              if (tmdb.vote_average) {\n                info.rating = tmdb.vote_average.toString();\n                info.rating_5based = tmdb.vote_average / 2;\n              }\n\n              if (tmdb.backdrop_path) info.backdrop_path = [\"https://image.tmdb.org/t/p/original\".concat(tmdb.backdrop_path)];\n\n              if (tmdb.videos && tmdb.videos.length > 0) {\n                trailer = tmdb.videos.find(function (x) {\n                  return x.Type === \"Trailer\";\n                });\n                if (trailer) info.youtube_trailer = trailer.key;\n              }\n\n              if (tmdb.episode_run_time && tmdb.episode_run_time > 0) info.episode_run_time = tmdb.episode_run_time[0].toString();\n              duration_secEp = info.episode_run_time ? info.episode_run_time * 60 : 0;\n              durationEp = info.episode_run_time ? info.episode_run_time.toString() : 0;\n\n              if (streams && streams.length > 0) {\n                Array.from(new Set(streams.map(function (x) {\n                  return x.season;\n                }))).forEach(function (season) {\n                  var eps = streams.filter(function (ch) {\n                    return parseInt(ch.season) === parseInt(season);\n                  }).sort(function (a, b) {\n                    return a.episode - b.episode;\n                  });\n                  episodes[season.toString()] = [];\n                  eps.forEach(function (ep) {\n                    if (tmdb[\"season/\".concat(season)]) {\n                      var titleEp = \"\";\n                      var airdateEp = \"\";\n                      var crewEp = \"\";\n                      var ratingEp = \"0\";\n                      var imageEp = \"\";\n                      var overview = \"\";\n                      var epData = tmdb[\"season/\".concat(season)].episodes.find(function (x) {\n                        return parseInt(x.episode_number) === parseInt(ep.episode);\n                      });\n\n                      if (epData) {\n                        titleEp = epData.name;\n                        airdateEp = tmdb[\"season/\".concat(season)].air_date;\n                        if (epData.crew) crewEp = epData.crew.map(function (x) {\n                          return x.name;\n                        }).join(',');\n                        if (epData.vote_average) ratingEp = (epData.vote_average / 2).toString();\n                        imageEp = epData.still_path ? \"https://image.tmdb.org/t/p/original\".concat(epData.still_path) : \"\";\n                        overview = epData.overview;\n                        episodes[season.toString()].push(createEpisode(ep.direct_source || ep.url, ep.id, ep.season, ep.episode, duration_secEp, durationEp, titleEp, airdateEp, crewEp, ratingEp, imageEp, overview));\n                      } else episodes[season.toString()].push(createEpisode(ep.direct_source || ep.url, ep.id, ep.season, ep.episode, duration_secEp, durationEp));\n                    } else {\n                      episodes[season.toString()].push(createEpisode(ep.direct_source || ep.url, ep.id, ep.season, ep.episode, duration_secEp, durationEp));\n                    }\n                  });\n                });\n              }\n            } else {\n              if (streams && streams.length > 0) {\n                Array.from(new Set(streams.map(function (x) {\n                  return x.season;\n                }))).forEach(function (season) {\n                  var eps = streams.filter(function (ch) {\n                    return parseInt(ch.season) === parseInt(season);\n                  }).sort(function (a, b) {\n                    return a.episode - b.episode;\n                  });\n                  episodes[season.toString()] = [];\n                  eps.forEach(function (ep) {\n                    episodes[season.toString()].push(createEpisode(ep.direct_source || ep.url, ep.id, ep.season, ep.episode));\n                  });\n                });\n              }\n            }\n\n            _context2.next = 23;\n            break;\n\n          case 22:\n            if (streams && streams.length > 0) {\n              Array.from(new Set(streams.map(function (x) {\n                return x.season;\n              }))).forEach(function (season) {\n                var eps = streams.filter(function (ch) {\n                  return parseInt(ch.season) === parseInt(season);\n                }).sort(function (a, b) {\n                  return a.episode - b.episode;\n                });\n                episodes[season.toString()] = [];\n                eps.forEach(function (ep) {\n                  episodes[season.toString()].push(createEpisode(ep.direct_source || ep.url, ep.id, ep.season, ep.episode));\n                });\n              });\n            }\n\n          case 23:\n            return _context2.abrupt(\"return\", {\n              \"info\": info,\n              \"episodes\": episodes\n            });\n\n          case 24:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getSeriesTmdbData.apply(this, arguments);\n}\n\nexport function clearEpisodeName(seriesName, data) {\n  if (!data || !data.episodes) return;\n  Object.keys(data.episodes).forEach(function (season) {\n    data.episodes[season].forEach(function (ep) {\n      ep.title = ep.title.replace(seriesName, \"\").replace(/S\\d{1,2}E\\d{1,2}/, \"\").trim();\n      if (!ep.title || ep.title === \"-\") ep.title = \"Episode \" + (ep.episode_num || ep.episode);\n    });\n  });\n}","map":{"version":3,"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/src/other/tmdb.js"],"names":["optimizeName","secondsToHms","createMovieInfo","createEpisode","axios","getVodTmdbData","name","existingTmdb","language","navigator","userLanguage","window","tmdb","get","toLowerCase","encodeURI","headers","catch","err","data","results","length","tmdbId","success","imageVod","coverBig","durationSecs","duration","rating10","youtubeTrailer","releaseDate","director","actors","cast","description","plot","age","country","genre","backdropPath","status","runtime","title","poster_path","images","backdrops","file_path","vote_average","videos","trailer","find","x","type","key","release_date","parseInt","Date","credits","map","join","crew","filter","job","overview","production_countries","genres","backdrop_path","getSeriesTmdbData","streams","info","episodes","seasons","Array","from","Set","season","cover","created_by","first_air_date","last_air_date","rating","toString","rating_5based","Type","youtube_trailer","episode_run_time","duration_secEp","durationEp","forEach","eps","ch","sort","a","b","episode","ep","titleEp","airdateEp","crewEp","ratingEp","imageEp","epData","episode_number","air_date","still_path","push","direct_source","url","id","clearEpisodeName","seriesName","Object","keys","replace","trim","episode_num"],"mappings":"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","sourcesContent":["import {optimizeName, secondsToHms, createMovieInfo, createEpisode} from \"./vod-series-name-optimizer\"\nimport * as axios from \"./axios\";\n\nexport async function getVodTmdbData(name, existingTmdb){\n    const language = navigator.language || navigator.userLanguage; \n    name = optimizeName(name);\n\n    if(!window.tmdb){\n      return createMovieInfo(name)\n    }\n\n    let tmdb = existingTmdb || await axios.get(`https://api.themoviedb.org/3/search/movie${language ? `?language=${language.toLowerCase()}&`:\"?\"}api_key=${window.tmdb}&query=${encodeURI(name)}`\n    ,{ headers: { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.55 Safari/537.36 Edg/86.0.622.28' }  } ).catch(err=> {return null});;\n    \n    if(existingTmdb || (tmdb && tmdb.data && tmdb.data.results.length>0)){\n       let tmdbId = existingTmdb || tmdb.data[\"results\"][0][\"id\"];\n       tmdb = await axios.get(`https://api.themoviedb.org/3/movie/${tmdbId}${language ? `?language=${language.toLowerCase()}&`:\"?\"}api_key=${window.tmdb}&append_to_response=images,credits,videos`,\n       { headers: { 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.55 Safari/537.36 Edg/86.0.622.28' }  } ).catch(err=> {return null});;\n    \n       if(tmdb && tmdb.data && !tmdb.data.success){\n          tmdb = tmdb.data;\n          \n          let imageVod = \"\";\n          let coverBig = \"\", durationSecs = 0, duration = \"\", rating10 = 0;\n          let youtubeTrailer = \"\", releaseDate = \"\";\n          let director = \"\", actors = \"\", cast = \"\", description = \"\", plot = \"\", age = \"\";\n          let country = \"\", genre = \"\", backdropPath = \"\", status = \"Released\", runtime = 0;\n    \n          if(tmdb.title)\n             name = tmdb.title;\n          if(tmdb.poster_path){\n             imageVod = `https://image.tmdb.org/t/p/original${tmdb.poster_path}`;\n          }\n          if(tmdb.images && tmdb.images.backdrops && tmdb.images.backdrops.length>0){\n             coverBig = `https://image.tmdb.org/t/p/original${tmdb.images.backdrops[0].file_path}`;\n          }\n          if(tmdb.status)\n             status = tmdb.status;\n          if(tmdb.runtime){\n             runtime = tmdb.runtime;\n             durationSecs = runtime*60;\n             duration = secondsToHms(durationSecs);\n          }\n          if(tmdb.vote_average)\n             rating10 = tmdb.vote_average;\n          if(tmdb.videos && tmdb.videos.results && tmdb.videos.results.length >0){\n             let trailer = tmdb.videos.results.find(x=> x.type === \"Trailer\") || tmdb.videos.results.find(x=> x.type === \"Teaser\");\n             if(trailer)\n                youtubeTrailer = trailer.key;\n          }\n          if(tmdb.release_date){\n             releaseDate = tmdb.release_date;\n             age = `${parseInt((new Date() - new Date(releaseDate))/(1000*60*60*24))} days ago`;\n          }\n          if(tmdb.credits && tmdb.credits.cast){\n             cast = tmdb.credits.cast.map(x=>x.name).join(', ');\n             actors = cast;\n          }\n          if(tmdb.credits && tmdb.credits.crew){\n             let crew = tmdb.credits.crew.filter(x=> x.job === \"Director\");\n             if(crew){\n                director = crew.map(x=>x.name).join(', ');\n             }\n          }\n          if(tmdb.overview){\n             description = tmdb.overview;\n             plot = description;\n          }\n          if(tmdb.production_countries && tmdb.production_countries.length>0){\n             country = tmdb.production_countries[0].name;\n          }\n          if(tmdb.genres)\n             genre = tmdb.genres.map(x=>x.name).join(', ');\n          if(tmdb.backdrop_path)\n             backdropPath = `https://image.tmdb.org/t/p/original${tmdb.backdrop_path}`;\n          return createMovieInfo(name, imageVod, tmdbId, releaseDate, coverBig,youtubeTrailer,director,actors, cast, description, plot, age, country, genre, backdropPath, durationSecs, duration, rating10, status, runtime)\n       }else return null;\n    }else return null;\n}\n\n\nexport async function getSeriesTmdbData(name, streams, existingTmdb) {\n   const language = navigator.language || navigator.userLanguage;\n   name = optimizeName(name);\n\n   let info = {};\n   let episodes = {};\n\n   let tmdb = existingTmdb || await axios.get(`https://api.themoviedb.org/3/search/tv${language ? `?language=${language.toLowerCase()}&`:\"?\"}api_key=${window.tmdb}&query=${encodeURI(name)}`, {\n      headers: {\n         'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.55 Safari/537.36 Edg/86.0.622.28'\n      }\n   }).catch(err => {\n      return null\n   });;\n\n   if (existingTmdb || (tmdb && tmdb.data && tmdb.data.results.length > 0)) {\n      const tmdbId = existingTmdb || tmdb.data[\"results\"][0][\"id\"];\n      let seasons = \"\";\n      streams && streams.length > 0  && (seasons =  Array.from(new Set(streams.map(x => x.season))).map(x=> `\",season/${x}`))\n      tmdb = await axios.get(`https://api.themoviedb.org/3/tv/${tmdbId}${language ? `?language=${language.toLowerCase()}&`:\"?\"}api_key=${window.tmdb}&append_to_response=images,credits,videos${seasons}`, {\n         headers: {\n            'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.55 Safari/537.36 Edg/86.0.622.28'\n         }\n      }).catch(err => {\n         return null\n      });;\n\n      if (tmdb && tmdb.data && !tmdb.data.success) {\n         tmdb = tmdb.data;\n         if (tmdb.name)\n            info.name = tmdb.name;\n         if (tmdb.poster_path)\n            info.cover = `https://image.tmdb.org/t/p/original${tmdb.poster_path}`;\n         if (tmdb.credits && tmdb.credits.cast)\n            info.cast = tmdb.credits.cast.map(x => x.name).join(', ');\n         if (tmdb.created_by)\n            info.director = tmdb.created_by.map(x => x.name).join(', ');\n         if (tmdb.genres)\n            info.genre = tmdb.genres.map(x => x.name).join(', ');\n         if (tmdb.first_air_date)\n            info.releaseDate = tmdb.last_air_date;\n         if (tmdb.vote_average) {\n            info.rating = tmdb.vote_average.toString();\n            info.rating_5based = tmdb.vote_average / 2;\n         }\n         if (tmdb.backdrop_path)\n            info.backdrop_path = [`https://image.tmdb.org/t/p/original${tmdb.backdrop_path}`];\n         if (tmdb.videos && tmdb.videos.length > 0) {\n            let trailer = tmdb.videos.find(x => x.Type === \"Trailer\");\n            if (trailer)\n               info.youtube_trailer = trailer.key;\n         }\n         if (tmdb.episode_run_time && tmdb.episode_run_time > 0)\n            info.episode_run_time = tmdb.episode_run_time[0].toString();\n\n         let duration_secEp = info.episode_run_time ? info.episode_run_time * 60 : 0;\n         let durationEp = info.episode_run_time ? info.episode_run_time.toString() : 0;\n\n\n         if (streams && streams.length > 0) {\n            Array.from(new Set(streams.map(x => x.season))).forEach(season => {\n               const eps = streams.filter(ch => parseInt(ch.season) === parseInt(season)).sort(function (a, b) {\n                  return a.episode - b.episode\n               });\n               episodes[season.toString()] = [];\n\n               eps.forEach(ep => {\n                  if (tmdb[`season/${season}`]) {\n                     let titleEp = \"\";\n                     let airdateEp = \"\";\n                     let crewEp = \"\";\n                     let ratingEp = \"0\";\n                     let imageEp = \"\";\n                     let overview = \"\";\n                     const epData = tmdb[`season/${season}`].episodes.find(x => parseInt(x.episode_number) === parseInt(ep.episode));\n                     if (epData) {\n                        titleEp = epData.name;\n                        airdateEp = tmdb[`season/${season}`].air_date;\n                        if (epData.crew)\n                           crewEp = epData.crew.map(x => x.name).join(',');\n                        if (epData.vote_average)\n                           ratingEp = (epData.vote_average / 2).toString();\n                        imageEp = epData.still_path ? `https://image.tmdb.org/t/p/original${epData.still_path}` : \"\";\n                        overview = epData.overview;\n                        episodes[season.toString()].push(createEpisode(ep.direct_source || ep.url, ep.id, ep.season, ep.episode, duration_secEp, durationEp, titleEp, airdateEp, crewEp, ratingEp, imageEp, overview));\n                     } else episodes[season.toString()].push(createEpisode(ep.direct_source || ep.url, ep.id, ep.season, ep.episode, duration_secEp, durationEp));\n                  } else {\n                     episodes[season.toString()].push(createEpisode(ep.direct_source || ep.url, ep.id, ep.season, ep.episode, duration_secEp, durationEp));\n                  }\n               });\n            })\n         }\n      } else {\n         if (streams && streams.length > 0) {\n            Array.from(new Set(streams.map(x => x.season))).forEach(season => {\n               const eps = streams.filter(ch => parseInt(ch.season) === parseInt(season)).sort(function (a, b) {\n                  return a.episode - b.episode\n               });\n               episodes[season.toString()] = [];\n\n               eps.forEach(ep => {\n                  episodes[season.toString()].push(createEpisode(ep.direct_source || ep.url, ep.id, ep.season, ep.episode));\n               });\n            })\n         }\n      }\n   } else if (streams && streams.length > 0) {\n      Array.from(new Set(streams.map(x => x.season))).forEach(season => {\n         const eps = streams.filter(ch => parseInt(ch.season) === parseInt(season)).sort(function (a, b) {\n            return a.episode - b.episode\n         });\n         episodes[season.toString()] = [];\n\n\n         eps.forEach(ep => {\n            episodes[season.toString()].push(createEpisode(ep.direct_source || ep.url, ep.id, ep.season, ep.episode));\n         });\n      })\n   }\n   return {\n      \"info\": info,\n      \"episodes\": episodes\n   }\n}\n\nexport function clearEpisodeName(seriesName, data){\n   if(!data || !data.episodes)\n      return;\n   Object.keys(data.episodes).forEach(season=>{\n      data.episodes[season].forEach(ep=>{\n         ep.title = ep.title.replace(seriesName,\"\").replace(/S\\d{1,2}E\\d{1,2}/,\"\").trim();\n         if(!ep.title || ep.title === \"-\")\n            ep.title = \"Episode \" + (ep.episode_num || ep.episode)\n      })\n   })\n}"]},"metadata":{},"sourceType":"module"}