{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\rayuv\\\\OneDrive\\\\Documents\\\\GitHub\\\\Reactv\\\\src\\\\components\\\\Epg-Fullscreen\\\\ProgrammeListing.js\",\n    _templateObject,\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport Programme from \"./Programme\";\nimport ProgrammeFake from \"./Programme-fake\";\nimport { getEpg, downloadEpgData } from \"../../other/epg-database\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Container = styled.ul(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\nwidth: calc(408rem);\\ndisplay: block;\\nposition: relative;\\nbackground-image: url(/img/placeholder-channel-events_border.svg);\\nbackground-repeat: repeat-x;\\nbackground-size: contain;\\nheight: 6.625rem;\\nlist-style-type:none;\\nmin-width: 408rem;\\nmax-width: 408rem;\\n\\n&:before{\\n    content: \\\"\\\";\\n    background-image: url(/img/placeholder-channel-events_border.svg);\\n    background-repeat: repeat-x;\\n    width: 500px;\\n    height: 100%;\\n    position: absolute;\\n    left: -504px;\\n}\\n\"])));\n_c = Container;\n\nvar ProgrammeListing = function ProgrammeListing(_ref) {\n  _s();\n\n  var Epg = _ref.Epg,\n      Shift = _ref.Shift,\n      today = _ref.today,\n      moveFocus = _ref.moveFocus,\n      chId = _ref.chId,\n      day = _ref.day,\n      liveTime = _ref.liveTime,\n      catchup = _ref.catchup;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      epgListing = _useState2[0],\n      setEpgListing = _useState2[1];\n\n  var catchupDate = catchup > 0 ? Date.now() - catchup * 1000 * 60 * 60 * 24 : 0;\n  useEffect(function () {\n    function fetchData(_x) {\n      return _fetchData.apply(this, arguments);\n    }\n\n    function _fetchData() {\n      _fetchData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(d) {\n        var newEpg;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (Epg) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.next = 4;\n                return downloadEpgData(chId, Epg, d + 1, Shift);\n\n              case 4:\n                newEpg = getEpg(Epg, d + 1, Shift);\n\n                if (newEpg) {\n                  setEpgListing(_toConsumableArray(newEpg));\n                } else setEpgListing([]);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchData.apply(this, arguments);\n    }\n\n    fetchData(day);\n  }, [day]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    onKeyDown: moveFocus,\n    autoFocus: true,\n    children: epgListing.length === 0 ? fakeEpgGenerator(today).map(function (epg) {\n      return /*#__PURE__*/_jsxDEV(ProgrammeFake, {\n        start: epg.start,\n        stop: epg.end,\n        dayTime: today,\n        chId: chId\n      }, chId + \"-\" + epg.start, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 22\n      }, _this);\n    }) : epgListing.map(function (epg, id) {\n      return /*#__PURE__*/_jsxDEV(Programme, {\n        start: epg.start,\n        stop: epg.end,\n        title: epg.title,\n        description: epg.description,\n        dayTime: today,\n        chId: chId,\n        liveTime: liveTime,\n        catchup: catchupDate > 0 && epg.start >= catchupDate && epg.start <= Date.now()\n      }, chId + \"-\" + epg.start, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }, _this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(ProgrammeListing, \"QVYg+sPmQvjV/gqPmX91jlorOsM=\");\n\n_c2 = ProgrammeListing;\nexport default ProgrammeListing;\n\nvar fakeEpgGenerator = function fakeEpgGenerator(today) {\n  var toReturn = [];\n\n  for (var i = 0; i < 24; i += 3) {\n    toReturn.push({\n      start: today + i * 3600000,\n      end: today + (i + 3) * 3600000\n    });\n  }\n\n  return toReturn;\n};\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"ProgrammeListing\");","map":{"version":3,"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/src/components/Epg-Fullscreen/ProgrammeListing.js"],"names":["React","useState","useEffect","styled","Programme","ProgrammeFake","getEpg","downloadEpgData","Container","ul","ProgrammeListing","Epg","Shift","today","moveFocus","chId","day","liveTime","catchup","epgListing","setEpgListing","catchupDate","Date","now","fetchData","d","newEpg","length","fakeEpgGenerator","map","epg","start","end","id","title","description","toReturn","i","push"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport styled from 'styled-components'\nimport Programme from \"./Programme\"\nimport ProgrammeFake from \"./Programme-fake\"\nimport {getEpg, downloadEpgData} from \"../../other/epg-database\"\n\nconst Container = styled.ul`\nwidth: calc(408rem);\ndisplay: block;\nposition: relative;\nbackground-image: url(/img/placeholder-channel-events_border.svg);\nbackground-repeat: repeat-x;\nbackground-size: contain;\nheight: 6.625rem;\nlist-style-type:none;\nmin-width: 408rem;\nmax-width: 408rem;\n\n&:before{\n    content: \"\";\n    background-image: url(/img/placeholder-channel-events_border.svg);\n    background-repeat: repeat-x;\n    width: 500px;\n    height: 100%;\n    position: absolute;\n    left: -504px;\n}\n`\n\nconst ProgrammeListing = ({Epg, Shift, today, moveFocus,chId, day, liveTime, catchup}) => {\n    const [epgListing, setEpgListing] = useState([]);\n    const catchupDate =  catchup > 0 ? Date.now() - (catchup * 1000 * 60 * 60 * 24) : 0\n\n    useEffect(() => {\n        async function fetchData(d) {\n            if (!Epg)\n                return;\n            await downloadEpgData(chId, Epg, d+1, Shift);\n\n            const newEpg = getEpg(Epg, d+1, Shift);\n            if (newEpg) {\n                setEpgListing([...newEpg]);\n            } else setEpgListing([]);\n        }\n        fetchData(day);\n    }, [day])\n\n    \n\n    return (\n        <Container onKeyDown={moveFocus} autoFocus>\n            {epgListing.length === 0 ?\n                fakeEpgGenerator(today).map((epg) => (\n                    (<ProgrammeFake key={chId+\"-\"+epg.start} start={epg.start} stop={epg.end} dayTime={today} chId={chId}></ProgrammeFake>)\n                ))\n                :\n                epgListing.map((epg,id) => (\n                    <Programme key={chId+\"-\"+epg.start} start={epg.start} stop={epg.end} title={epg.title} description={epg.description} dayTime={today} chId={chId} liveTime={liveTime} catchup={catchupDate > 0 && epg.start >= catchupDate && epg.start <= Date.now()}/>\n                ))\n            }\n        </Container>\n    )\n}\n\nexport default ProgrammeListing\n\n\nconst fakeEpgGenerator = (today) =>{\n    let toReturn = [];\n    for(let i = 0; i < 24; i+=3){\n        toReturn.push({start: today+(i*3600000), end: today+((i+3)*3600000)})\n    }\n    return toReturn;\n}"]},"metadata":{},"sourceType":"module"}