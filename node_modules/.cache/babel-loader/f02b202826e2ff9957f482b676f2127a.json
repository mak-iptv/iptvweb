{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\rayuv\\\\OneDrive\\\\Documents\\\\GitHub\\\\Reactv\\\\src\\\\components\\\\Live\\\\Fullscreen.js\",\n    _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _templateObject5,\n    _templateObject6,\n    _templateObject7,\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport styled from \"styled-components\";\nimport ChannelEpgBar from \"./ChannelEpgBar\";\nimport { getSingleEpgNow, downloadEpgData } from \"../../other/epg-database\";\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar dateFormat = require(\"dateformat\");\n\nvar EpgChName = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    position: absolute;\\n    background-image: linear-gradient(to bottom, #212121 -70% , transparent);\\n    top:0;\\n    left:0;\\n    width:100%;\\n    height:40%;\\n    z-index:1000000000000000000000;\\n\\n    & > div{\\n        padding-top: 2%;\\n        padding-bottom: 3%;\\n        position: relative;\\n        width: 70%;\\n        left: 15%;\\n    } \"])));\n_c = EpgChName;\nvar EpgInfoBox = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n    position: absolute;\\n    background-image: linear-gradient(to top, #212121 0% , transparent);\\n    height:47%;\\n\\n    & > div{\\n        padding-bottom: 5%;\\n        padding-top: 10%;\\n        position: relative;\\n        width: 70%;\\n        left: 15%;\\n    } \"])));\n_c2 = EpgInfoBox;\nvar Title = styled.h2(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n-webkit-line-clamp: 1;\\noverflow: hidden;\\n/*word-wrap: break-word;\\nword-break: break-all;*/\\ntext-overflow: ellipsis;\\ndisplay: -webkit-box;\\n-webkit-box-orient: vertical;\\n\"])));\n_c3 = Title;\nvar Description = styled.h4(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\nfont-weight: 100;\\noverflow-wrap: break-word;\\noverflow: hidden;\\n-webkit-line-clamp: 5;\\nmax-height: 30%;\\n/*word-wrap: break-word;\\nword-break: break-all;*/\\ntext-overflow: ellipsis;\\ndisplay: -webkit-box;\\n-webkit-box-orient: vertical;\\n\"])));\n_c4 = Description;\nvar MainDiv = styled.div(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\nwidth: 100%;\\nheight: 100%;\\nposition: absolute;\\ntop:0;\\nleft:0;\\ncolor: white;\\noverflow: hidden;\\n\\n& > div{\\n    width: 100%;\\n    transition: bottom .5s ease 0s, top .5s ease 0s;\\n}\\n&:focus{\\n    outline-width: 0px;\\n}\\n\"])));\n_c5 = MainDiv;\nvar StopTime = styled.label(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\nright: 0;\\nposition: absolute;\\n\"])));\n_c6 = StopTime;\nvar Logo = styled.div(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n/*background: #203d79;*/\\npadding: .1rem .1rem;\\nborder-radius: .2rem;\\ntext-align: center;\\nwidth: 100%;\\nfont-weight: bold;\\nmin-height: 2.4rem;\\nmax-height: 2.4rem;\\n\\n&>img{\\n    max-height: 2.2rem;\\n    height: auto;\\n    width: auto;\\n    padding-left: 0.5rem;\\n    padding-right: 0.5rem;\\n}\\n\"])));\n_c7 = Logo;\n\nvar FullscreenMag = function FullscreenMag(_ref) {\n  _s();\n\n  var externalShow = _ref.externalShow,\n      cTitle = _ref.cTitle,\n      cDesc = _ref.cDesc,\n      cDuration = _ref.cDuration;\n  var EpgChNameRef = useRef(0);\n  var EpgInfoBoxRef = useRef(0);\n  var mainRef = useRef(null);\n  var playingChannel = useSelector(function (state) {\n    return state.playingCh;\n  });\n  var Epg = playingChannel && !cTitle && playingChannel.epg_channel_id;\n  var Shift = playingChannel && playingChannel.shift;\n  var chId = playingChannel && playingChannel.stream_id;\n  var timer = useSelector(function (state) {\n    return state.timer5;\n  });\n  var h24Format = useSelector(function (state) {\n    return state.h24;\n  });\n\n  var _useState = useState(cDuration ? {\n    title: cTitle,\n    description: cDesc\n  } : false),\n      _useState2 = _slicedToArray(_useState, 2),\n      epgNow = _useState2[0],\n      setEpgNow = _useState2[1];\n\n  var title = epgNow && epgNow.start ? epgNow.title : \"\";\n  var description = epgNow && epgNow.start ? epgNow.description : \"\";\n  var start = epgNow && epgNow.start ? dateFormat(new Date(epgNow.start), h24Format) : \"\";\n  var stop = epgNow && epgNow.start ? dateFormat(new Date(epgNow.end), h24Format) : \"\";\n  /*const remoteController = (event) => {\n      if(event.keyCode === 27 || event.keyCode === 8){\n          //dispatch(setFullScreen(false));\n          clearTimeout(showOverlay);\n          history.replace(location.pathname.split(\"fullscreen\")[0])\n          setTimeout(function () {\n              document.getElementById(\"selectedCh\") && (document.getElementById(\"selectedCh\").focus());\n          }, 100);\n      }else if(event.keyCode === 107 || event.keyCode === 109){\n          dispatch(setVolume(event.keyCode === 107))\n      }else{\n          clearTimeout(showOverlay);\n          EpgInfoBoxRef.current && (EpgInfoBoxRef.current.style.bottom = \"0px\");\n          EpgChNameRef.current && (EpgChNameRef.current.style.top = \"0px\");\n          \n          showOverlay = setTimeout(function () {\n              EpgInfoBoxRef.current && (EpgInfoBoxRef.current.style.bottom = \"-50%\");\n              EpgChNameRef.current && (EpgChNameRef.current.style.top = \"-40%\");\n          }, 6000);\n      }\n  }*/\n\n  useEffect(function () {\n    if (externalShow) {\n      EpgInfoBoxRef.current && (EpgInfoBoxRef.current.style.bottom = \"0px\");\n      EpgChNameRef.current && (EpgChNameRef.current.style.top = \"0px\");\n    } else {\n      EpgInfoBoxRef.current && (EpgInfoBoxRef.current.style.bottom = \"-50%\");\n      EpgChNameRef.current && (EpgChNameRef.current.style.top = \"-40%\");\n    }\n  }, [externalShow]);\n  useEffect(function () {\n    if (!Epg || cDuration) return;\n\n    function fetchData() {\n      return _fetchData.apply(this, arguments);\n    }\n\n    function _fetchData() {\n      _fetchData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var newEpg;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return downloadEpgData(chId, Epg, 1, Shift);\n\n              case 2:\n                newEpg = getSingleEpgNow(Epg, Shift);\n                if (!newEpg) setEpgNow(false);else if (newEpg && (epgNow === false || epgNow.start !== newEpg.start)) {\n                  setEpgNow(_objectSpread({}, newEpg));\n                }\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchData.apply(this, arguments);\n    }\n\n    fetchData();\n  }, [playingChannel]);\n  useEffect(function () {\n    if (cDuration) return;\n    var newEpg = getSingleEpgNow(Epg, Shift);\n    if (!newEpg) setEpgNow(false);else if (newEpg && (epgNow === false || epgNow.start !== newEpg.start)) {\n      setEpgNow(_objectSpread({}, newEpg));\n    }\n  }, [timer, Epg, Shift, cDuration, epgNow]);\n  return /*#__PURE__*/_jsxDEV(MainDiv, {\n    tabIndex: 0,\n    ref: mainRef,\n    children: [/*#__PURE__*/_jsxDEV(EpgChName, {\n      ref: EpgChNameRef,\n      style: {\n        top: \"-40%\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-3\",\n          children: /*#__PURE__*/_jsxDEV(Logo, {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: playingChannel && playingChannel.stream_icon,\n              loading: \"lazy\"\n              /*onError={()=>{this.onerror=null;this.src='../images/nologo.png?1'}} */\n              ,\n              align: \"middle\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: playingChannel && playingChannel.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(EpgInfoBox, {\n      ref: EpgInfoBoxRef,\n      style: {\n        bottom: \"-50%\",\n        display: !epgNow.start && \"none\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Title, {\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Description, {\n          children: description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: start\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(StopTime, {\n          children: stop\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }, _this), epgNow.start ? /*#__PURE__*/_jsxDEV(ChannelEpgBar, {\n          start: epgNow.start,\n          stop: epgNow.end\n        }, playingChannel && playingChannel.epg_channel_id + \" \" + epgNow.start, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 22\n        }, _this) : /*#__PURE__*/_jsxDEV(ChannelEpgBar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 188,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(FullscreenMag, \"T6cwWPGGPaRQuYcJh37QjPV9vh4=\", false, function () {\n  return [useSelector, useSelector, useSelector];\n});\n\n_c8 = FullscreenMag;\nexport default FullscreenMag;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n\n$RefreshReg$(_c, \"EpgChName\");\n$RefreshReg$(_c2, \"EpgInfoBox\");\n$RefreshReg$(_c3, \"Title\");\n$RefreshReg$(_c4, \"Description\");\n$RefreshReg$(_c5, \"MainDiv\");\n$RefreshReg$(_c6, \"StopTime\");\n$RefreshReg$(_c7, \"Logo\");\n$RefreshReg$(_c8, \"FullscreenMag\");","map":{"version":3,"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reactv/src/components/Live/Fullscreen.js"],"names":["React","useState","useEffect","useRef","styled","ChannelEpgBar","getSingleEpgNow","downloadEpgData","useSelector","dateFormat","require","EpgChName","div","EpgInfoBox","Title","h2","Description","h4","MainDiv","StopTime","label","Logo","FullscreenMag","externalShow","cTitle","cDesc","cDuration","EpgChNameRef","EpgInfoBoxRef","mainRef","playingChannel","state","playingCh","Epg","epg_channel_id","Shift","shift","chId","stream_id","timer","timer5","h24Format","h24","title","description","epgNow","setEpgNow","start","Date","stop","end","current","style","bottom","top","fetchData","newEpg","stream_icon","name","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef} from 'react'\nimport styled from \"styled-components\"\nimport ChannelEpgBar from \"./ChannelEpgBar\"\nimport {getSingleEpgNow, downloadEpgData} from \"../../other/epg-database\"\nimport {useSelector} from \"react-redux\"\n\nconst dateFormat = require(\"dateformat\");\n\nconst EpgChName = styled.div`\n    position: absolute;\n    background-image: linear-gradient(to bottom, #212121 -70% , transparent);\n    top:0;\n    left:0;\n    width:100%;\n    height:40%;\n    z-index:1000000000000000000000;\n\n    & > div{\n        padding-top: 2%;\n        padding-bottom: 3%;\n        position: relative;\n        width: 70%;\n        left: 15%;\n    } `;\n\nconst EpgInfoBox = styled.div`\n    position: absolute;\n    background-image: linear-gradient(to top, #212121 0% , transparent);\n    height:47%;\n\n    & > div{\n        padding-bottom: 5%;\n        padding-top: 10%;\n        position: relative;\n        width: 70%;\n        left: 15%;\n    } `;\n\nconst Title = styled.h2`\n-webkit-line-clamp: 1;\noverflow: hidden;\n/*word-wrap: break-word;\nword-break: break-all;*/\ntext-overflow: ellipsis;\ndisplay: -webkit-box;\n-webkit-box-orient: vertical;\n`\n\nconst Description = styled.h4`\nfont-weight: 100;\noverflow-wrap: break-word;\noverflow: hidden;\n-webkit-line-clamp: 5;\nmax-height: 30%;\n/*word-wrap: break-word;\nword-break: break-all;*/\ntext-overflow: ellipsis;\ndisplay: -webkit-box;\n-webkit-box-orient: vertical;\n`\n\nconst MainDiv = styled.div`\nwidth: 100%;\nheight: 100%;\nposition: absolute;\ntop:0;\nleft:0;\ncolor: white;\noverflow: hidden;\n\n& > div{\n    width: 100%;\n    transition: bottom .5s ease 0s, top .5s ease 0s;\n}\n&:focus{\n    outline-width: 0px;\n}\n`\n\nconst StopTime = styled.label`\nright: 0;\nposition: absolute;\n`\n\nconst Logo = styled.div`\n/*background: #203d79;*/\npadding: .1rem .1rem;\nborder-radius: .2rem;\ntext-align: center;\nwidth: 100%;\nfont-weight: bold;\nmin-height: 2.4rem;\nmax-height: 2.4rem;\n\n&>img{\n    max-height: 2.2rem;\n    height: auto;\n    width: auto;\n    padding-left: 0.5rem;\n    padding-right: 0.5rem;\n}\n`\n\nconst FullscreenMag = ({externalShow, cTitle, cDesc, cDuration}) => {\n    const EpgChNameRef = useRef(0);\n    const EpgInfoBoxRef = useRef(0);\n    const mainRef = useRef(null);\n\n    const playingChannel = useSelector(state => state.playingCh);\n    const Epg = playingChannel && !cTitle && (playingChannel.epg_channel_id);\n    const Shift = playingChannel && (playingChannel.shift);\n    const chId = playingChannel && (playingChannel.stream_id);\n\n    const timer = useSelector(state => state.timer5);\n    const h24Format = useSelector(state => state.h24);\n\n    const [epgNow, setEpgNow] = useState(cDuration ? {\n        title : cTitle,\n        description: cDesc\n    } : false);\n\n    \n    const title = epgNow && epgNow.start ? epgNow.title : \"\"\n    const description = epgNow && epgNow.start ? epgNow.description : \"\"\n    const start = epgNow && epgNow.start ? dateFormat(new Date(epgNow.start), h24Format) : \"\"\n    const stop = epgNow && epgNow.start ? dateFormat(new Date(epgNow.end), h24Format) : \"\"\n\n    /*const remoteController = (event) => {\n        if(event.keyCode === 27 || event.keyCode === 8){\n            //dispatch(setFullScreen(false));\n            clearTimeout(showOverlay);\n            history.replace(location.pathname.split(\"fullscreen\")[0])\n            setTimeout(function () {\n                document.getElementById(\"selectedCh\") && (document.getElementById(\"selectedCh\").focus());\n            }, 100);\n        }else if(event.keyCode === 107 || event.keyCode === 109){\n            dispatch(setVolume(event.keyCode === 107))\n        }else{\n            clearTimeout(showOverlay);\n            EpgInfoBoxRef.current && (EpgInfoBoxRef.current.style.bottom = \"0px\");\n            EpgChNameRef.current && (EpgChNameRef.current.style.top = \"0px\");\n            \n            showOverlay = setTimeout(function () {\n                EpgInfoBoxRef.current && (EpgInfoBoxRef.current.style.bottom = \"-50%\");\n                EpgChNameRef.current && (EpgChNameRef.current.style.top = \"-40%\");\n            }, 6000);\n        }\n    }*/\n\n    useEffect(()=>{\n        if(externalShow){\n            EpgInfoBoxRef.current && (EpgInfoBoxRef.current.style.bottom = \"0px\");\n            EpgChNameRef.current && (EpgChNameRef.current.style.top = \"0px\");\n        }else{\n            EpgInfoBoxRef.current && (EpgInfoBoxRef.current.style.bottom = \"-50%\");\n            EpgChNameRef.current && (EpgChNameRef.current.style.top = \"-40%\");\n        }\n    },[externalShow])\n\n    useEffect(()=>{\n        if(!Epg || cDuration)\n            return;\n        async function fetchData(){\n            await downloadEpgData(chId, Epg, 1, Shift);\n            const newEpg = getSingleEpgNow(Epg,Shift);\n            if(!newEpg)\n                setEpgNow(false);\n            else if(newEpg && (epgNow === false || epgNow.start !== newEpg.start)){\n                setEpgNow({...newEpg});\n            } \n        }\n        \n        fetchData()\n    },[playingChannel]);\n\n    useEffect(() => {\n        if(cDuration)\n            return;\n        const newEpg = getSingleEpgNow(Epg,Shift);\n        if(!newEpg)\n            setEpgNow(false);\n        else if(newEpg && (epgNow === false || epgNow.start !== newEpg.start)){\n            setEpgNow({...newEpg});\n        } \n    }, [timer, Epg, Shift, cDuration, epgNow]);\n\n    return (\n        <MainDiv tabIndex={0} ref={mainRef}>\n            <EpgChName ref={EpgChNameRef} style={{top : \"-40%\"}}>\n                <div className=\"row\">\n                    <div className=\"col-3\">\n                        <Logo>\n                            <img src={playingChannel && (playingChannel.stream_icon)} loading={\"lazy\"} /*onError={()=>{this.onerror=null;this.src='../images/nologo.png?1'}} */ align=\"middle\" alt=\"\" />\n                        </Logo>\n                    </div>\n                    <div className=\"col-auto\">\n                        <h2>{playingChannel && (playingChannel.name)}</h2> \n                    </div>\n                </div>\n            </EpgChName>\n            <EpgInfoBox ref={EpgInfoBoxRef} style={{bottom : \"-50%\", display : !epgNow.start && (\"none\")}}>\n                <div>\n                    <Title>{title}</Title>\n                    <Description>{description}</Description>\n                    <label>{start}</label>\n                    <StopTime>{stop}</StopTime>\n                    {epgNow.start ?\n                    (<ChannelEpgBar key={playingChannel && (playingChannel.epg_channel_id)+ \" \" +epgNow.start} start={epgNow.start} stop={epgNow.end}/>)\n                    :\n                    <ChannelEpgBar />\n                    }\n                </div>\n            </EpgInfoBox>\n        </MainDiv>\n    )\n}\n\nexport default FullscreenMag\n"]},"metadata":{},"sourceType":"module"}